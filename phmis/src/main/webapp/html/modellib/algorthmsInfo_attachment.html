
<!DOCTYPE html>
<!-- release v4.4.9, copyright 2014 - 2018 Kartik Visweswaran -->
<!--suppress JSUnresolvedLibraryURL -->
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Krajee JQuery Plugins - &copy; Kartik</title>
	<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="/static/ace/css/bootstrap.css" />
		<link rel="stylesheet" href="/static/ace/css/font-awesome.css" />

    <link href="/static/bootstrap-fileinput-master/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
        <link href="/static/bootstrap-fileinput-master/themes/explorer-fa/theme.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="/static/bootstrap-fileinput-master/jquery-3.2.1.min.js"></script>
    <script src="/static/bootstrap-fileinput-master/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="/static/bootstrap-fileinput-master/js/fileinput.js" type="text/javascript"></script>
    <script src="/static/bootstrap-fileinput-master/js/locales/fr.js" type="text/javascript"></script>
    <script src="/static/bootstrap-fileinput-master/js/locales/zh.js" type="text/javascript"></script>
    <script src="/static/bootstrap-fileinput-master/themes/explorer-fa/theme.js" type="text/javascript"></script>
    <script src="/static/bootstrap-fileinput-master/themes/fa/theme.js" type="text/javascript"></script>
    <script src="/static/bootstrap-fileinput-master/popper.min.js" type="text/javascript"></script>
		<script src="/assets/js/bootstrap.min.js"></script>
		 <script src="/static/js/util.js"></script>
</head>
<body>
<div class="container kv-main" style="width:100%;">
    
    <form enctype="multipart/form-data">
        <div class="file-loading">
            <input id="kv-explorer" type="file" multiple>
        </div> 
    </form>
     <div id="attach"></div>
</div>
</body>
<script>
 
    $(document).ready(function () { 
        $("#kv-explorer").fileinput({
            'theme': 'explorer-fa',
            'uploadUrl': '/algorithmsModelsInfo/uploadFile',  
             language: 'zh', //设置语言 
        enctype: 'multipart/form-data', 
        showUpload: true, //是否显示上传按钮
        showPreview: true,              //展前预览
        showCaption: true,//是否显示标题
        maxFileSize : 1000000,//上传文件最大的尺寸
        maxFilesNum : 10,//
        dropZoneEnabled: true,//是否显示拖拽区域
        browseClass: "btn btn-primary", //按钮样式
        uploadAsync: true, 
	   validateInitialCount:true,
	   overwriteInitial: false,
	   allowedPreviewTypes: ['image'],
	   previewFileIcon:'<i class="fa fa-file-o"></i>',
	   previewFileIconSettings: null,
        layoutTemplates :{
            // actionDelete:'', //去除上传预览的缩略图中的删除图标
            actionUpload:'',//去除上传预览缩略图中的上传图片；
            actionZoom:''   //去除上传预览缩略图中的查看详情预览的缩略图标。
        },
            initialPreviewAsData: true 
        });
        //异步上传返回结果处理
	$("#kv-explorer").on("fileuploaded", function (event, data, previewId, index) {
	        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
	        debugger 
	      ///  $("#attach").append(html);
	        $("#url",window.parent.document).val(data.response.url); 
	        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
      		 parent.layer.close(index);
	       ///alert(data.response.name); 
	       
	    });
    });
</script>
</html>